@{
    ViewData["Title"] = "Authors";
}

<div class="row">
    <div class="col">
        <div class="card">
            <!-- Card header -->
            <div class="card-header border-0">
                <h3 class="mb-0">Authors</h3>
            </div>

            <div class="table-responsive">
                <table id="authorsDT" class="table align-items-center table-flush">
                    <thead class="thead-light">
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Creation Date</th>
                        @* <th>Edit</th>     *@
                        <th>Delete</th>
                    </tr>
                    </thead>
                    <tbody class="list">
                    </tbody>
                </table>
            </div>
            <div class="card-footer py-4">
                <nav aria-label="...">
                    <ul class="pagination justify-content-end mb-0">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">
                                <i class="fas fa-angle-left"></i>
                                <span class="sr-only">Previous</span>
                            </a>
                        </li>
                        <li class="page-item active">
                            <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">3</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#">
                                <i class="fas fa-angle-right"></i>
                                <span class="sr-only">Next</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>

@section Styles
{
    <link href="../vendor/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet"/>
    <link href="../vendor/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet"/>
    <link href="../vendor/datatables.net-select-bs4/css/select.bootstrap4.min.css" rel="stylesheet"/>
    <link href="../vendor/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css" rel="stylesheet"/>
}

@section Scripts
{
    @* <script src="../vendor/jquery/dist/jquery.min.js"></script> *@

    <script src="../vendor/datatables.net/js/jquery.dataTables.min.js"></script>

    <script src="../vendor/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="../vendor/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
    <script src="../vendor/datatables.net-select-bs4/js/select.bootstrap4.min.js"></script>
    <script src="../vendor/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>

    <script>  
      
        $(document).ready(function() {  
            var token = '@Html.AntiForgeryToken()';
            $("#authorsDT").DataTable({  
                "processing": true, // for show progress bar    
                "serverSide": true, // for process server side    
                "filter": true, // this is for disable filter (search box)    
                "orderMulti": false, // for disable multiple column at once    
                "pagingType": "full_numbers",
                "ajax": {  
                    "url": "@Url.Action("LoadData", "Author")",  
                    "type": "POST",
                    "data": function ( d ) {
                            d.__RequestVerificationToken = $(token).val();
                        },
                    "datatype": "json"  
                },  
                "columnDefs": [{  
                    "targets": [0],  
                    "visible": false,  
                    "searchable": false  
                },
                // {"defaultContent": "-", "targets": "_all"}
                ],  
                "columns": [  
                    { "data": "Id", "name": "Id", "autoWidth": true },  
                    { "data": "Name", "name": "Name", "autoWidth": true },  
                    { "data": "CreationDate", "name": "CreationDate", "autoWidth": true },  
                    // {  
                    //     "render": function(data, type, full, meta) { return '<a class="btn btn-info" href="/DemoGrid/Edit/' + full.CustomerID + '">Edit</a>'; }  
                    // },  
                    {  
                        data: null,  
                        render: function(data, type, row) {  
                            return "<a href='#' class='btn btn-danger' onclick=DeleteData('" + row.Id + "'); >Delete</a>";  
                        }  
                    },  
                ]  
      
            });  
        });  
      
      
    function DeleteData(CustomerID) {  
        if (confirm("Are you sure you want to delete ...?")) {  
            Delete(CustomerID);  
        } else {  
            return false;  
        }  
    }  
      
      
    function Delete(Id) {  
        var url = '@Url.Action("Delete", "Author")';  
        var token = '@Html.AntiForgeryToken()'
        $.post(url, { id: Id ,__RequestVerificationToken:$(token).val()}, function(data) {  
            if (data) {  
                oTable = $('#authorsDT').DataTable();  
                oTable.draw();  
            } else {  
                alert("Something Went Wrong!");  
            }  
        });  
    }  
      
    </script>
}
